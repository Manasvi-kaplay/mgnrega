<html>
<head>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/cylinder.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<style>
    #container {
    height: 400px; 
}
.highcharts-figure, .highcharts-data-table table {
    min-width: 310px; 
    max-width: 800px;
    margin: 1em auto;
}
.highcharts-data-table table {
    font-family: Verdana, sans-serif;
    border-collapse: collapse;
    border: 1px solid #EBEBEB;
    margin: 10px auto;
    text-align: center;
    width: 100%;
    max-width: 500px;
}
.highcharts-data-table caption {
    padding: 1em 0;
    font-size: 1.2em;
    color: #555;
}
.highcharts-data-table th {
	font-weight: 600;
    padding: 0.5em;
}
.highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
    padding: 0.5em;
}
.highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
    background: #f8f8f8;
}
.highcharts-data-table tr:hover {
    background: #f1f7ff;
}
</style>
</head>
<body>
<center>
    <h2>Highlighting importance of panchayat reports on the basis of no. of registrations/population</h2>
    <table border="1px">
        <tr>
            <th class="t1">S.No</th>
            <th class="t1">Panchayat</th>
            <th class="t1">Total registered</th>
            <th class="t1">Total households</th>
            <th class="t1">Percentage registered</th>
            </tr>
            <%result.sort(function(a, b) {
                return parseFloat(a.total2/a.total1) - parseFloat(b.total2/b.total1);
                });%>
            <% result.forEach(function(x,i){ %>
                <div>
                <tr>
                    <td><%=i+1%></td>
                    <td><%=x._id%></td>
                    <td><%=x.total2 %></td>
                    <td><%=x.total1 %></td>
                    <td><%=(x.total2*100)/x.total1 %></td>
                </tr>
                <% }) %>
    </table>
    <h4>Note: As percentage registered decreases,importance of reports increases</h4>
    <form action="/panchayat_wise_imp/graph" method="post">
        <input type="hidden" value="<%=result%>">
        <button type="submit">View graph</button>
    </form>
    <figure class="highcharts-figure">
        <div id="container" onchange="take(this)"></div>
        <p class="highcharts-description">
        </p>
    </figure>
    </center>
    <script type="text/javascript">
        $(document).ready(function(){
            $.get("/login/getBlocks",function(data){
                for (var i = 0; i < data.length; i+=1) {
                    var option = document.createElement("OPTION");
                    option.innerHTML = data[i];
                    option.value = data[i];
                    document.getElementById("selectblock").appendChild(option);
                }
            })
        })  
        var percent=[];
        for(var i=0;i<result.length;i+=1){
            var temp=result[i].total2;
            percent.push(result[i].total2)
        }
        Highcharts.chart('container', {
    chart: {
        type: 'cylinder',
        options3d: {
            enabled: true,
            alpha: 15,
            beta: 15,
            depth: 50,
            viewDistance: 25
        }
    },
    title: {
        text: 'Highcharts Cylinder Chart'
    },
    plotOptions: {
        series: {
            depth: 25,
            colorByPoint: true
        }
    },  
    series: [{
        data: percent,
        name: 'Cylinders',
        showInLegend: false
    }]
});
    
    </script>
    </body>
</html>